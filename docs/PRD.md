# PRD｜Extension (目前只包含前端的要求)


## 0) Scope & Tech Baseline

* **Framework**: React + **Plasmo** (MV3)
* **Styling**: **TailwindCSS**（集中 tokens；仅用语义类/变量，不随手 px）
* **Surfaces**: 
* content script：FAB 小球、Extension Panel（Home/Find/C-0）、E-0 Notepad（覆盖层）、E-1 放大编辑（覆盖层）、C-1 快速保存卡片（覆盖层）。
     * E-0/E-1/C-1 采用页面内覆盖层（Overlay），不新开浏览器窗口。
   * popup：Auth 三态（U-0 未登录 / A-0 登录中 / U-1 已登录）。
* background：扩展的后台总管/服务端，负责注册右键菜单（空白仅“Notepad”；选中文本有“Notepad/快速保存”）
* **Shell**: 统一外壳（BrandBar / Content / FooterBar / Tabbar），Popup 与 CS 复用；BrandBar 右侧提供关闭按钮（X），行为与 ESC/遮罩关闭一致
* **Data & Backend**: v1 本地 Mock + API 预留；v1.1 对接 Python 后端（职责：Auth/CRUD/Sync/Market）。埋点仅本地记录（不出网）。
* **API Contract（预留）**: REST/JSON（或 GraphQL 视后端定）
  * Auth：登录/注销/状态（Mock → Token 制，JWT/Session 待定）
  * Prompts：列表/查询/保存/更新/删除（含库/收藏）
  * Favorites：收藏/取消收藏、列表
  * Market：列表/查询（只读）
  * Sync：拉取/推送（本地优先渲染）；冲突＝Server wins（按更新时间戳）；恢复在线后后台自动同步（静默）。
* **A11y**: 焦点管理、`role`/`aria-*` 与 reduced-motion 口径固定；DOM `id` 必须唯一；Tabbar 使用 `role=tablist`/`role=tab` + `aria-selected`（不使用 `aria-pressed`）；非激活项指针样式为 `cursor: pointer`，激活项为默认指针
* **Pixels**: **必须一致**（±0px 容忍）；动效口径固定（fast 150ms / normal 240ms）；下拉组件在固定面板尺寸内自适应翻转/收缩避免与底部 Tabbar 重叠
* **Browsers**: Chrome 120+（MV3），Edge 同步；Firefox 暂缓（后评估 polyfill）

* **Storage（Extension）**: `chrome.storage.local`
  * `pm.prompts`（库）、`pm.favorites`（收藏引用）、`pm.settings`（开关/分类等）、`pm.notepadDraft`（E-0 全局草稿）、`pm.fabPosition`（全局小球位置）、`pm.auth`（会话标记）
* **Permissions（MV3）**: `storage`、`contextMenus`、`clipboardWrite`、`scripting`、`activeTab`（最小权限原则）
* **Offline**: 本地优先；Find 离线降级为占位提示；恢复在线后后台自动同步（无显式提示）。Edge：在“边界/异常”中移除“一键同步”提示。Find 离线 → 展示占位，不触发网络；Home/库可全功能；恢复在线后静默补齐市场数据。
* **Security/CSP**: 禁止 `eval`/行内脚本；仅可信域名；输入内容转义/去危险 HTML；最小权限
* **Performance**: 打开面板首帧 ≤ 150ms（典型机器）；列表 ≥ 30 条时启用虚拟滚动；交互反馈 ≤ 100ms
* **i18n**: 初期固定 zh-CN；文案集中管理，后续可抽取为 tokens


### 页面清单（Screens / States）：

1. **Extension Panel · Home（我的）**

   * **Extension Panel · Home（我的）**
       * 数据源切换：库 / 收藏
       * 搜索、常用区（可选）、列表、页脚 Tabbar
   * **Extension Panel · Find（发现/市场）**
      * 浏览 / 复制 / 收藏；列表 + 页脚 Tabbar（Find 不支持直接编辑/保存）
  * **Extension Panel · C-0 （保存/编辑页）**
  * 标题（可选）、备注/使用说明、分类（固定枚举）、System Message（可选+放大编辑）、正文*、公开/私有开关；删除（仅编辑已有条目时可见，位于开关下方、底部操作栏上方，全宽危险样式）；保存/取消

2. **快速保存卡片（轻量表单）**

 * 标题（可选）、正文*、分类（可选）；快速保存（标题留空时以正文前 ~10 个字作为展示标题）
3. **E-0 Notepad（页面内覆盖层窗口）**
 * 全局笔记本：字数/行数统计、软换行；支持复制、保存为 Prompt（弹 C-1）、取消（草稿保留、下次恢复）

4. **E-1 放大编辑（页面内覆盖层窗口）**
 * 字段级放大编辑：出现在多行文本字段旁（如 C-0 正文/System Message、C-1 正文）；仅“完成/取消”两动作，完成回填原字段

5. **Auth（三态）**

  * **U-0：未登录状态**（面板内状态视图：引导登录/注册）
  * **A-0：注册**（用户名+邮箱+密码+密码确认）
  * **A-0：登录**（仅邮箱+密码；无第三方登录）
  * **U-1：已登录状态**（面板内状态视图：账号信息/统计数据/Prompt 存储/启用浮动按钮/注销）
   
5. **FAB 悬浮小球（pm-fab）**

   * 单击开 Panel；拖动仅移动；吸附边界


#### 各页面内容与功能（FR）

— Extension Panel · Home（我的）
- FR-HOME-001：搜索库/收藏，范围含标题/正文/System Message，回车触发筛选（Home 与 Find 一致）。
- FR-HOME-002：分段控件切换“库/收藏”，点击即切换，刷新列表与常用区。
- FR-HOME-003：常用区展示近90天使用频次降序（仅“复制”动作计数，含 Home·库/收藏与 Find 的复制）；并列按最近使用时间降序；在面板重新打开时重算。
- FR-HOME-004：分类下拉筛选列表；默认“全部”。
- FR-HOME-005：列表卡片支持复制（多策略兜底确保成功）与进入编辑（C-0）。复制内容规则：
  * 同时存在 System Message 与 正文 → 输出两段，格式：
    system message：\n{System Message}\n\nprompt：\n{正文}
  * 仅有正文 → 直接输出正文
 - FR-HOME-006：分页组件固定在列表下方；输入页码回车跳转；越界不跳转并给出轻量反馈（输入框抖动+红框 1.5s + 面板内底部居中 Toast，Esc 可关闭）。
- FR-HOME-007：页脚 Tabbar 在 Home/Find 间切换。
- FR-HOME-008：标题栏“X”可关闭面板；关闭后小球在原位置复现。
- FR-HOME-009：埋点：打开面板、切换数据源、搜索、筛选、复制、进入编辑、分页跳转、关闭等。
 - FR-HOME-010：顶部“新建”按钮可进入 C-0 创建全新条目（与 Find 一致）。
- FR-HOME-011：分类下拉包含系统默认（全部、编程、写作、商务、营销、翻译、其他）与用户自定义；下拉底部提供“新建分类”行动项。下拉内容超出时仅在下拉内滚动；下拉不得与底部栏重叠或越界。
- FR-HOME-012：Home 子状态：
  * 我的 - 库：卡片动作=复制、编辑。
  * 我的 - 收藏：卡片动作=复制、编辑、取消收藏；从收藏进入编辑：
    - 若保存：派生为“库”新条目，并从“收藏”移除该条；
    - 若取消：保持收藏条目不变。
 - FR-HOME-013：列表区域至少显示 10 条，支持垂直滚动浏览（与分页固定搭配）。
 - FR-HOME-014：常用区仅支持横向滑动查看；列表区为纵向滚动。

— Extension Panel · Find（发现/市场）
- FR-FIND-001：搜索市场数据（标题/正文/System Message），回车触发筛选。
- FR-FIND-002：卡片动作仅“复制、收藏”；不支持直接编辑/保存。
- FR-FIND-003：顶部“新建”按钮可进入 C-0 创建全新条目。
- FR-FIND-004：分类下拉筛选市场列表。
- FR-FIND-005：分页输入回车跳页，越界轻量反馈（同 Home）。
- FR-FIND-006：离线时显示离线占位提示，不展示列表。
- FR-FIND-007：页脚 Tabbar 可切换至 Home；标题栏“X”可关闭面板。
- FR-FIND-008：埋点：搜索、筛选、复制、收藏、分页、离线显示等。
- FR-FIND-009：分类下拉包含系统默认（全部、编程、写作、商务、营销、翻译、其他）与用户自定义；下拉底部提供“新建分类”行动项（样式与 Home 一致）。下拉内容超出时仅在下拉内滚动；下拉不得与底部栏重叠或越界。
 - FR-FIND-010：分页组件固定在列表下方（与 Home 行为一致）。
- FR-FIND-011：列表区域至少显示 15 条，支持垂直滚动浏览（与分页固定搭配）。

— Extension Panel · C-0（保存/编辑页）
 - FR-C0-001：字段：标题（可选，留空时用正文前~10字展示）、备注/使用说明、分类（系统默认+自定义，下拉支持“新建分类”行动项）、System Message（可选）、正文（必填）。
- FR-C0-002：正文与 System Message 提供“放大编辑”入口（E-1）。
- FR-C0-003：校验：正文必填；标题可空；其他按需可空；校验不通过禁止保存并提示。
- FR-C0-004：保存：写入“我的·库”；若来源于“收藏”编辑，保存派生为“库”新条目并切回库。
- FR-C0-005：取消：返回上一层列表（不刷新整页）。
- FR-C0-006：放大编辑：可进入 E-1 深度编辑，“完成”后回填至卡片。
- FR-C0-007：分类包含系统默认（全部、编程、写作、商务、营销、翻译、其他）与用户自定义；支持在下拉底部通过“新建分类”快速创建。
- FR-C0-008：埋点：进入来源（新建/编辑/收藏派生）、保存成功/失败、取消、放大编辑（E-1）入口点击等。
 - FR-C0-009：多行输入（正文、System Message）右下角提供“拉手”，仅支持向下拉伸，指针为斜向双箭头。
 - FR-C0-010：分类未选择时默认“其他”；分类下拉选项固定（全部、编程、写作、商务、营销、翻译、其他），超出时在下拉内上下滚动。
 - FR-C0-011：取消返回到打开 C-0 前所在的面板页面与位置。
 - FR-C0-012：删除：仅在“编辑已有条目”时显示“删除 Prompt”按钮；按钮位置在“正文”输入框下方、底部操作栏上方；按钮宽度与输入框一致（w-full），尺寸与其他主要按钮一致（h-9、text-sm、rounded-lg），采用危险样式（红色系，默认 bg-red-500，hover:bg-red-600，text-white）。
 - FR-C0-013：删除交互：点击后弹出二次删除确认弹窗确认；确认后删除该条并返回上一层列表。
 - FR-C0-014：删除埋点：点击删除、确认删除、删除成功/失败。
 - FR-C0-015：公开/私有开关（isPrivate）：点击私有化此条prompt。

— C-1 快速保存卡片（轻量表单）
 - FR-C1-001：若有选中文本，正文默认带入选区内容。
 - FR-C1-002：字段：标题（可选，留空用正文前~10字）、分类（系统默认+自定义，可选；下拉支持“新建分类”行动项）、正文（必填）。
- FR-C1-003：快速保存：写入本地（未登录上限30条，超过拦截提示）；离线本地持久，在线后可提示同步。
- FR-C1-004：清空：一键清空输入。
- FR-C1-005：放大编辑：可进入 E-1 深度编辑，“完成”后回填至卡片。
- FR-C1-006：埋点：打开来源（右键）、保存、清空、进入 E-0 等。
 - FR-C1-007：分类未选择时默认“其他”；分类下拉选项固定（全部、编程、写作、商务、营销、翻译、其他），超出时在下拉内上下滚动。
 - FR-C1-008：多行输入（若存在）右下角提供“拉手”，仅支持向下拉伸。
- FR-C1-009：C-1 以内容页内可拖拽悬浮卡片呈现，卡片不得超出可视范围。

— E-0 Notepad（全局笔记）
- FR-E0-001：入口: 右键菜单（任意页面空白处/有选区均可见“Notepad”）。
- FR-E0-002：用途：自由写作/脑暴；支持长文软换行与字数/行数统计（v1）。
- FR-E0-003：复制：一键复制编辑区全文（多策略兜底确保复制成功；首选 `navigator.clipboard.writeText`）。
- FR-E0-004：保存为 Prompt：点击后弹出 C-1 快速保存卡片，默认将当前 Notepad 内容作为正文带入。
- FR-E0-005：取消：关闭窗口但不清空草稿；下次打开自动恢复到上次关闭时的文本与光标位置（全局唯一草稿 `pm.notepadDraft`）。
- FR-E0-006：窗口：页面内覆盖层，支持拖拽、不得出屏；宽度与面板保持统一视觉基线。
- FR-E0-007：埋点：打开来源（右键）、复制、保存为 Prompt、取消、草稿恢复。

— E-1 放大编辑（字段级）
- FR-E1-001：入口：出现在多行输入字段旁的“放大编辑”按钮（例如 C-0 的 正文 / System Message、C-1 的 正文）。
- FR-E1-002：用途：提供更大的编辑视窗以便阅读/编写字段内容；打开时载入该字段当前内容。
- FR-E1-003：动作：仅两项——完成、取消。
  * 完成：将编辑结果回填到来源字段并关闭窗口。
  * 取消：不更改来源字段，直接关闭。
- FR-E1-004：显示：字数/行数统计、软换行；不提供复制、不提供“保存为 Prompt”。
- FR-E1-005：窗口：页面内覆盖层，支持拖拽，不得出屏；宽度与面板保持统一视觉基线。
- FR-E1-006：埋点：入口（字段/页面）、完成、取消。

— Auth · U-0 未登录状态
- FR-U0-001：显示未登录提示卡片与“立即登录/注册”按钮。
- FR-U0-002：显示当前限制（最多30条、本地存储、不同步）。
- FR-U0-003：本地存储进度条与剩余数量提示。
- FR-U0-004：启用浮动按钮（FAB）开关。
- FR-U0-005：辅助操作：打开 WebApp；版本号显示。
- FR-U0-006：埋点：展示、点击登录、开关 FAB、打开 WebApp 等。
 - FR-U0-007：入口与定位：通过浏览器地址栏旁扩展图标进入，视图锚定于该入口位置，不支持拖动。

— Auth · A-0 登录
- FR-A0-LOGIN-001：登录页字段：邮箱、密码；主按钮“立即登录”。
- FR-A0-LOGIN-002：底部文案：“我们的 服务条款 和 隐私政策”。
- FR-A0-LOGIN-003：移除“使用验证码登录”与第三方登录入口。
 - FR-A0-LOGIN-004：提交成功 → 切换到 U-1（已登录）并显示“登录成功，正在同步”。
 - FR-A0-LOGIN-005：返回入口；埋点：进入、提交、返回等。

— Auth · A-0 注册
- FR-A0-REGISTER-001：注册页字段：用户名、邮箱、密码（至少6位，占位符提示）、确认密码；主按钮“立即注册”。
- FR-A0-REGISTER-002：底部文案：“注册即表示您同意我们的 服务条款 和 隐私政策”。
- FR-A0-REGISTER-003：底部提供“已有账户？立即登入”文字按钮（主色文字，可点击）。
 - FR-A0-REGISTER-004：提交成功 → 切换到登录页。
 - FR-A0-REGISTER-005：返回入口；埋点：进入、提交、返回等。
 - FR-A0-ENTRY-001：入口与定位：通过浏览器地址栏旁扩展图标进入，视图锚定于该入口位置，不支持拖动。

— Auth · U-1 已登录状态
- FR-U1-001：展示用户信息（用户名/邮箱/加入于日期）；布局：标签在左（图标在标签左侧）、值在右。
- FR-U1-002：统计数据：Prompt 数量/收藏数量。
- FR-U1-003：Prompt 存储显示（∞）。
- FR-U1-004：启用浮动按钮（FAB）开关；注销登录。
- FR-U1-005：埋点：展示、开关 FAB、注销、打开 WebApp 等。
 - FR-U1-006：入口与定位：通过浏览器地址栏旁扩展图标进入，视图锚定于该入口位置，不支持拖动。

— FAB 悬浮小球（pm-fab）
 - FR-FAB-001：单击打开面板；拖动仅移动位置。
 - FR-FAB-002：位置全局记忆；跨站点一致。存储坐标按 viewport 百分比（相对定位），跨分辨率/缩放能复现相对位置。
 - FR-FAB-003：出屏吸附：在窗口尺寸变化/越界时，自动吸附最近可见边；最小边距 12px；吸附触发阈值为距离边界 ≤ 24px。
 - FR-FAB-004：不支持快捷键（本期）。
 - FR-FAB-005：埋点：展示、拖动、点击打开。

— 右键菜单（Context Menu）
- FR-CM-001：有选区：显示“快速保存”“Notepad”。
- FR-CM-002：无选区：仅显示“Notepad”。
- FR-CM-003：“快速保存”预填正文为选中文本；标题可空。
- FR-CM-004：“Notepad”预填为选中文本（若有），否则加载全局 Notepad 草稿内容。
- FR-CM-005：埋点：展示、点击项、保存行为。

## 1) 产品概要（What & Why）

面向频繁使用 AI 提示词的创作者与知识工作者，我们提供一款**浏览器内的 Prompt 管理面板（extension）**。核心价值：**不离开当前网页**就能**快速保存、编辑、搜索并复用**提示词，显著降低上下文切换成本。不同于需要切应用或打开整页网站的工具，我们把“**收集→整理→复用**”压缩进**同一面板**完成。使用方式：任意页面用**悬浮小球**唤起面板，搜索浏览“**我的库/收藏**”，**一键复制**即用；有新想法时可进入**表单完整编辑**（含放大编辑），或**选中文本右键“快速保存”**不中断当前操作；在“**发现/市场**”挑选优质提示词并**复制或收藏**（Find 不直接编辑；收藏后在 Home·收藏中再编辑保存）。账号层：未登录提供用量提示与清晰引导，登录后**自动同步个人数据**。整体以**统一面板与清晰分区**覆盖常用、列表与表单，让流程变成“**点一下、存一下、用一下**”，提升产出效率，减少重复劳动。

---

## 2) 关键用户流程（Flow）

本节以“入口 → 承载形态 → 窗口间切换与层级”为主线，集中定义每个窗口/卡片的出现位置与相互流转（不覆盖功能细节，详见 FR）。

### 2.1 入口总览
- 浏览器 popup（固定锚定扩展图标位置）：承载 Auth 三态（U-0 未登录 / A-0 登录注册 / U-1 已登录），三者在同一 popup 窗口内切换。
- content script 覆盖层：FAB 小球、Extension Panel（Home/Find/C-0）、E-0 Notepad、E-1 放大编辑、C-1 快速保存卡片。
- background 右键菜单：注册“快速保存 Prompt”“Notepad”两项，用于在页面上唤起 C-1 或 E-0 覆盖层。

### 2.2 浏览器 popup（Auth）
- 位置与承载：固定锚定于浏览器扩展图标处的 popup；不可拖动。
- 首次进入：显示 U-0（未登录）。
- 切换路径：
  * U-0 →（点击“登录/注册”）→ A-0（登录页）
  * A-0（登录成功）→ U-1（已登录）
  * 登录页底部“没有账户？立即注册”→ A-0（注册页）
  * 注册页底部“已有账户？立即登入”→ A-0（登录页）
  * U-1（点击“注销登录”）→ U-0（未登录）
- 返回：A-0 提供“返回入口”。

### 2.3 content script（FAB → Extension Panel）
- FAB：安装后默认出现在页面右下；可拖拽移动，位置全局记忆，出屏自动吸附；单击打开 Extension Panel。
- 打开落点：Extension Panel 首次打开落在 Home。
- Home 内典型流转：
  * 顶部“+新建” → 进入 C-0（保存/编辑）
  * 列表项“编辑” → 进入 C-0（编辑已有）
  * 多行字段“放大” → 覆盖层 E-1（叠加在面板上方）
  * 分类下拉底部“新建分类” → 覆盖层“新建分类”提示（在面板上方）
  * C-0 中点击“删除” → 覆盖层“确认删除”提示（在面板上方）
  * 底部 Tabbar 切换至 Find → 进入 Find
- Find 内典型流转：
  * 顶部“+新建” → 进入 C-0（创建全新条目）
  * 列表卡片仅“复制/收藏”（编辑在 Home·收藏中完成）
- 关闭：面板右上角 X / ESC / 点击遮罩关闭；关闭后 FAB 在原位置复现。

### 2.4 background 右键菜单（C-1 / E-0）
- 有选区：
  * “快速保存 Prompt” → 覆盖层 C-1（正文默认带入选中文本）；C-1 中点击“放大” → 覆盖层 E-1（叠在 C-1 上方）
  * “Notepad” → 覆盖层 E-0（默认填入选中文本）
- 无选区：
  * “Notepad” → 覆盖层 E-0（首次为空；如曾使用则恢复上次草稿与光标位置）
- E-0 操作：
  * “保存为 Prompt” → 弹出 C-1，预填 E-0 文本
  * “复制” → 复制 E-0 全文
- 关闭：
  * E-1/C-1 关闭后回到其下层窗口；E-0 关闭后草稿保留，后续自动恢复。

### 2.5 层级与叠放（Z-Order）
- 基本规则：谁后打开谁在最上面；点击谁，谁获得焦点并置于最上层。
- 提示类覆盖层：除“确认删除”外，其余提示（如“新建分类”“成功提示”等）默认强制置顶；“确认删除”遵循通用置顶规则。
- 典型叠放关系：
  * E-1 可叠在 C-0 或 C-1 之上；
  * “新建分类”“确认删除”等提示叠在 Extension Panel 之上；
  * 多层覆盖时按“后开优先”的栈顶原则管理焦点与遮罩。
- 关闭回退：关闭顶层覆盖层回到下层；关闭 Extension Panel 后 FAB 复现；popup 为单窗口内切换（无拖拽与跨层叠放）。

---

## 4) 界面与交互（UX/UI）— PM 可读版

请参考高保真原型图 html，确保每一个页面窗口与设计 1:1（像素严格，动效口径：fast 150ms / normal 240ms）。所有页面宽度统一；C-0 与 Extension Panel 共享同一壳层；E-0 ， E-1 ，C-1 为页面内覆盖层的可拖拽窗口（保持与面板统一视觉基线）。

#### 各页面布局与尺寸

本节仅描述“布局结构”与“关键尺寸”，不涉及交互/逻辑（详见 FR）。统一遵循以下基线（参考 `ui4-static.html`）：

- 宽度基线：`--pm-width = clamp(300px, 19.56vw, 440px)`（最大 440px）
- 圆角：`--pm-radius = 12px`；阴影：`--pm-shadow`（中等级）
- 面板高度：680px；滚动条视觉宽度约 6px

— 统一规范（全局）
- 三段式骨架：除提示模态外，所有页面/卡片窗口均采用`BrandBar（头部） → Main（主体） → Footer（底部 Tabbar）`。Tabbar 仅在面板视图显示。
- 覆盖层呈现：所有卡片窗口（Extension Panel、C-0、C-1、E-0、E-1）均以浏览器页面覆盖层呈现，宽度遵循 `--pm-width`，内容区内部滚动，避免出屏。
- BrandBar 家族：统一使用 `#panel-brand-bar`（`px-3 py-2`，底部细分割线）。左侧为 32×32px 渐变圆徽 + 标题/副标题，右侧关闭按钮 28×28px。不同页面仅更换图标与文案。
- 按钮统一：高度 36px（h-9），圆角 8–12px；同一套样式族在各页面复用，仅文字/颜色/宽度不同。
- 输入/选择/分段统一：高度 36px；分段控件整体高 36px，圆角与滑块风格与家族一致。
- Prompt Card 统一：
  * 常用区横向卡片：最小高度 68px；单卡宽约容器的 58–60%；水平间距 8–12px；横向滚动。
  * 列表纵向卡片：最小高度 76px；左右内边距约 12px；动作位按钮 32×32px（常用区动作位为 28×28px）。
- 分页条：居中位于列表区下方；翻页按钮约 24×24px；页码输入行高约 24px，整体高度 ≤ 32px。

— Extension Panel（通用壳层：Home / Find / C-0）
- 布局结构：
  * BrandBar（左圆徽+标题/副标题，右关闭）
  * Main：搜索行（左搜索输入，右“新建”按钮）→（按需）分段控件/分类下拉/常用区 → 列表区 → 分页条
  * Footer：底部 Tabbar（Home / Find）
- 关键尺寸：
  * 宽度：`--pm-width`；圆角：`--pm-radius`；阴影：`--pm-shadow`
  * BrandBar 内边距 8×12px；图标 18px；关闭按钮 28×28px
  * 搜索/按钮/分段/下拉：统一 36px 高
  * 列表区纵向滚动；滚动条宽约 6px
  * Tabbar 高度 40px（图标 18px，文字 12px）
  * 面板高度 680px（主体内容区内滚动）

— Extension Panel · Home（我的）
- 布局结构：搜索行 → 常用区（横向卡片）→ 分段（库/收藏）→ 分类下拉 → 列表区（纵向卡片）→ 分页控制器；底部 Tabbar 选中 Home。
- 关键尺寸：常用区卡片最小高 68px，单卡宽 58–60%；列表卡片最小高 76px；动作位按钮：常用区 28×28px，列表 32×32px。

— Extension Panel · Find（发现/市场）
- 布局结构：搜索行 → 分类下拉 → 列表区（右上动作位）→ 分页控制器；底部 Tabbar 选中 Find。
- 关键尺寸：与 Home 一致（面板宽度、输入/下拉 36px、列表滚动、分页条尺寸一致）；列表卡片动作位按钮 32×32px。

— Extension Panel · C-0（保存/编辑）
- 布局结构：BrandBar → 表单（标题 → 备注/使用说明 → 分类下拉 → System Message（多行，右侧预留“放大”入口位）→ 正文（多行，右侧预留“放大”入口位））→ 公开/私有开关 →  删除按钮区（整行）→ 底部操作栏（右对齐“取消/保存”）。
- 关键尺寸：输入/下拉 36px；多行文本最小高 150px（可向下拉伸）；删除按钮等高 36px、全宽；按钮圆角 8–12px。

— C-1：Quick-Save Card（精简表单）
- 布局结构：头部栏 → 精简表单（标题 → 分类下拉 → 正文（多行，右侧预留“放大”入口位））→ 底部操作栏（按钮居中）。
- 关键尺寸：遵循 `--pm-width` 与 `--pm-radius`；输入/下拉 36px；多行文本最小高 150px；底部双按钮 36px 高，水平居中。

— E-0：Notepad
- 布局结构：BrandBar → 大面积编辑区（多行文本域）→ 底部信息栏（统计/保存提示）→ 底部操作栏（“Save as Prompt/复制” 按钮居中）。
- 关键尺寸：最大宽度 1000px；编辑区最小高 360px；顶部/底部栏 32–40px；顶部按钮高 28px；底部双按钮居中。

— E-1：放大编辑
- 布局结构：BrandBar（标题“放大编辑”）→ 大面积编辑区（承载单字段内容）→ 底部操作栏（“取消/完成”，按钮居中）。
- 关键尺寸：最大宽度 1000px；编辑区最小高 360px；动作按钮高 28px；圆角/内边距与 E-0 保持一致。

— Auth · U-0 未登录状态（浏览器 popup）
- 布局结构：BrandBar → 主体卡片区（账号状态卡 → 限制说明卡 → 存储进度行 → 设置行（开关）→ 辅助链接行）→ 底部版本信息。
- 关键尺寸：与面板同宽基线；进度条约 10px 高；开关约 44×24px；卡片内边距 12px；行距 8–12px。

— Auth · A-0（浏览器 popup）
- 登录页布局：顶部 Logo 圆徽 → 欢迎标题/说明 → 表单区（邮箱/密码 2 行）→ 主按钮 → 辅助说明/返回。
- 注册页布局：顶部 Logo 圆徽 → 标题/说明 → 表单区（用户名/邮箱/密码/确认密码 4 行）→ 主按钮 → 辅助说明（含“已有账户？立即登入”文字按钮）。
- 关键尺寸：Logo 48×48px；输入/按钮 36px 高；左右内边距 12px；区块间距 12–16px。

— Auth · U-1 已登录状态（浏览器 popup）
- 布局结构：BrandBar → 主体卡片区（账号信息卡 → 统计数据卡 → 存储展示行 → 设置行（开关）→ 辅助操作行）。
- 关键尺寸：与 U-0 一致；开关 44×24px；卡片内边距 12px；行距 8–12px。

— FAB 悬浮小球（pm-fab）
- 布局结构：位于页面内容之上的圆形可拖拽按钮，默认停靠右下角。
- 关键尺寸：直径 52px；默认距边 16px；最小可见留白 ≥ 12px；点击热区与视觉一致。


## 5) 目录架构（前端 - extension部分）— PM 可读版

promptman/
├── .plasmo                     # 工具生成的中间产物与模板（自动生成，不计入“启用源码”，不展开）
├── assets                      # 图标等静态资源（手动维护，不展开）
├── build                       # 构建产物输出（自动生成，不展开）
├── node_modules                # 依赖目录（自动生成，不展开）
├── .gitkeep                    # 空目录占位文件（手动维护，不展开；用于保留目录结构）
├── .postcssrc                  # PostCSS 配置 
├── package-lock.json           # 依赖锁定文件（npm 自动生成，不展开；建议纳入版本控制，不手动编辑）
├── package.json                # 工程脚本与 Plasmo manifest 配置出口 
├── tailwind.config.ts          # Tailwind 定制 
├── tsconfig.json               # TS 编译与类型规则来源
└─ src/                         # 核心代码目录
   ├─ styles/                   # 全局样式与设计
   ├─ libs/                     # 可以复用的工具代码
   ├─ services/                 # 存储，缓存和后端端api服务
   ├─ components/               # 可以复用的UI组件
   │  ├─ ui/                    # 全局 通用 UI 组件
   │  │  ├─ Toggle.tsx          # 开关控件。 位置：U-0 启用浮动按钮
   │  │  ├─ ProgressBar.tsx     # 进度条。 位置：U-0 进度条
   │  │  ├─ TextArea.tsx        # 多行输入。 位置：C-1/C-0/E-0/E-1
   │  │  ├─ Select.tsx          # 分类选择框。位置：Extension Panel、C-1、C-0
   │  │  ├─ Button.tsx          # 通用按钮模板（风格/大小/图标/加载/禁用）。位置：Extension “+新建”、C-0/C-1、E-0/E-1、U-0、A-0 等
   │  │  └─ Input.tsx           # 通用输入模板（占位/聚焦/出错）。位置：A-0 邮箱/密码、C-0/C-1 标题等
   │  └─ panel/                 # extension panel 专用 ui 组件
   │     ├─ PanelSearchBar.tsx  # 搜索框
   │     ├─ Segmented.tsx       # 库/收藏分段切换控件
   │     ├─ Pagination.tsx      # 分页组件
   │     └─ Tabbar.tsx          # 底部 Tab（Home/Find）切页栏
   ├─ features/                 # 具体页面/窗口的视图
   │  ├─ auth/                  # popup：U-0/U-1/A-0
   │  ├─ panel/                 # content-script：Home / Find / C-0（复用 PanelShell）
   │  ├─ QuickSaveCard.tsx            
   │  └─ EditorE0.tsx                
   ├─ background/                # 这是扩展的后台总管，没有他我们右键就不会有任何显示就无法进入e-0和快捷保存。
   ├─ popup/                     # 三态（U-0 未登录 / A-0 登录中 / U-1 已登录）的注入入口。没有它:工具栏入口就没法登录/注册/看状态。
   └─ contents/                  # FAB 小球、Extension Panel（Home/Find/C-0）、E-0 放大编辑（覆盖层）、C-1 快速保存卡片（覆盖层）。的页面注入入口，如果没有他我们的FAB 小球、Extension Panel（Home/Find/C-0）、E-0 放大编辑（覆盖层）、C-1 快速保存卡片（覆盖层）。就不能在浏览器页面显示
